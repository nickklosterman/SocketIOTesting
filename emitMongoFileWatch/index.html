<!doctype html>
<html>
  <head>
    <!-- if not on localhost these won't work due to XSS prevention by browsers -->
    <!-- <script src='//code.jquery.com/jquery-1.7.2.min.js'></script> -->
    <!-- <script src='//localhost:3000/socket.io/socket.io.js'></script> -->

    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js'></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js'></script>
    <script>
      var countdown = function(element) {
      var newValue=parseInt(element.attr('value'))-1;
      element.setAttribute('value',newValue)
      };
//      var socket = io.connect('http://localhost:8090');
      var socket = io.connect('http://10.20.99.169:8090');
      socket.on('SAC', function(data) {
      console.log(data.data);
      $('#SAC').html(data.data);
      $('#SACtimer').setAttribute('max',data.data.duration);

setInterval(countdown,1000);

      });
      socket.on('CL', function(data) {
      console.log(data.data);
      $('#CL').html(data.data);
      $('#CLtimer').setAttribute('max',data.data.duration);
      });
      socket.on('WM', function(data) {
      console.log(data.data);
      $('#WM').html(data.data);
      $('#WMtimer').setAttribute('max',data.data.duration);

      });
      socket.on('counter', function(data) {
      $('#counter').html(data);
      });
      socket.on('welcome', function(data) {
      $('#welcome').html(data.message);
      console.log(data.message);
      });
      socket.on('error', function() { console.error(arguments) });
      socket.on('message', function() { console.log(arguments) });
      
      $(function(){
      $('#send').click(function(){
      var data = {
      message: $('#query').val()
      };
      socket.send(JSON.stringify(data));
      //$('#query').val('');
      });
      });
    </script>
<style>
/*this styling hides the images in the past deals unless hovered over */
li>img { display: none; }
li:hover>img {display: inline; }
</style>

  </head>
  <body>
    <p>Be sure to change the socket variable in the html to match the ip of the server. </p>

    <div id='welcome'></div>
    <input id='query' type='text' placeholder='Enter your search term here!'>
    <input id='send' type='button' value='Query'>
    <progress id='SACtimer' max='100' value='100'></progress>
    <div id='SAC'></div>
    <hr>
    <progress id='CLtimer' max='100' value='100'></progress>
    <div id='CL'></div>
    <hr>
    <progress id='WMtimer' max='100' value='100'></progress>
    <div id='WM'></div>


    <ul id='counter'></ul>
</body>
</html>
